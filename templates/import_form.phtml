<div class="header">
    <h1>Импорт продуктов из CSV</h1>
</div>
<div class="form-container">
    <p>Файл CSV должен содержать колонки в следующем порядке: `name`, `description`, `price`, `category_id`, `image_url`</p>

    <?php if (!empty($formError)): ?>
        <div class="alert alert-danger">
            <?= htmlspecialchars($formError, ENT_QUOTES, 'UTF-8') ?>
        </div>
    <?php endif; ?>

    <?php if (!empty($success)): ?>
        <div class="alert alert-success">
            ✅ Импорт успешно завершён. Добавлено товаров: <?= (int)$success ?>
        </div>
    <?php endif; ?>

    <?php if (!empty($rowErrors)): ?>
        <div class="alert alert-warning">
            ⚠ Во время импорта возникли ошибки:
            <ul>
                <?php foreach ($rowErrors as $line => $errors): ?>
                    <li>
                        Строка <?= (int)$line ?>:
                        <?= implode(', ', array_map('htmlspecialchars', $errors)) ?>
                    </li>
                <?php endforeach; ?>
            </ul>
        </div>
    <?php endif; ?>

    <form action="/index.php?action=import" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="csv_file">Выберите файл CSV:</label>
            <input type="file" name="csv_file" id="csv_file" accept=".csv" required>
        </div>
        <button type="submit" class="btn btn-primary">Импортировать</button>
    </form>
</div>